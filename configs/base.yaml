# RCID 基础实验配置
# 所有实验配置继承此文件，覆盖特定字段

# 模型
teacher:
  name: "gpt2"                 # HuggingFace model ID
  n_layers: 12
  d_model: 768

student:
  name: "custom_4layer"        # 或 "distilgpt2"
  n_layers: 4
  d_model: 384                 # 故意与教师不同，测试跨维度

# 回路分析
circuit:
  task: "ioi"                  # ioi / greater_than / acronym
  n_contrastive_pairs: 500     # 对比数据集大小
  top_k_checkpoints: 5         # 选择因果效应最大的 k 个检查点

# 对齐
alignment:
  calibration_size: 200        # Procrustes 校准集大小
  layer_matching: "cka"        # cka / linear_probe / manual

# 蒸馏训练
training:
  epochs: 20
  batch_size: 32
  lr: 5e-5
  lambda_rcid: 1.0             # L_RCID 权重
  lambda_kl: 1.0               # L_KL 权重
  optimizer: "adamw"
  scheduler: "cosine"
  seed: 42

# 评估
eval:
  metrics:
    - "task_accuracy"           # IOI 准确率
    - "causal_consistency"      # 因果干预一致性
    - "perplexity"              # WikiText 困惑度（通用能力）
